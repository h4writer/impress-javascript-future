<!doctype html>
<html>
    <head>
        <title>The Future of JavaScript</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="highlight-styles/googlecode.css">
        <link href="style.css" rel="stylesheet" />
    </head>
    <body>

        <div id="impress">

            <div id='title'>
                <h1>The future of Javascript.</h1>
                <h2>EcmaScript 6 and even more</h2>
            </div>

            <div class="step" data-x="700" data-y="-300" data-scale="0.6">
            </div>

            <div class="step" data-x="800" data-y="170" data-scale="0.7">
                <h1 style='margin-bottom:50px;'>About us</h1>
                <h2 style='margin-bottom:300px;'>Hannes Verschore</h2>
                <h2>Benjamin Bouvier</h2>
            </div>
            <div class="step" data-x="600" data-y="200" data-scale="0.3">
                <div style='position:relative; height:500px;'>
                    <img src='img/bruges.jpg' class='substep' width='400px' style='position:absolute;top:140px; right:-50px;'/>
                    <p class='large substep' style='position:absolute;top:-15px;right:-50px'>JS Dev</p>
                    <img src='img/js-perf.png' class='substep' style='position:absolute;top:-10px; left:0px;' />
                    <div class='substep middle' style='position:absolute;top:190px; left:-150px'>
                        <img src='img/firefox.png' style='width:100px;' />
                        Platform engineer on JS engine.
                    </div>
                    <div class='substep middle center' style='position:absolute;top:340px;left:-50px;' >
                        <img src='img/awfy.png' width='350px'/><br />
                        Maintainer of AreWeFastYet.com
                    </div>
                    <div class='blue middle substep absolute'
                        style='text-decoration:underline; right:-50px;
                        top:530px'>h4writer.com<br/>@h4writer</div>
                </div>
            </div>

            <div class="step" data-x="600" data-y="450" data-scale="0.3">
                <div style='position:relative; height:500px;'>
                    <img src='img/lyon.jpg' class='substep' style='position:absolute;top:50px; right:0px; width:800px;'/>
                    <div class='substep' style='position:absolute;top:100px;right:50px'>
                        <img src='img/firefox.png' style='width:100px;' />
                    </div>
                    <div class='substep'
                        style='position:absolute;top:150px;left:200px'>
                        <img src='img/asmjsinside.png' style='width:400px;' />
                    </div>
                    <div class='substep'
                        style='position:absolute;top:150px;left:200px;font-size:14px'>
                        *not an official logo (credits to Steven Wittens)
                    </div>
                    <div class='substep'
                        style='position:absolute;bottom:-30px;right:200px;font-size:20px'>
                        @njbenji</div>
                </div>
            </div>

            <div class="es6-list step" data-x="1300" data-y="280" data-scale="0.7">
                <h1>EcmaScript 6.0</h1>

                <ul>
                <li><h2>ES6: Generators</h2></li>
                <li><h2>ES6: Classes</h2></li>
                <li><h2>ES6: Arrow functions</h2></li>
                <li><h2>ES6: Destructuring</h2></li>
                <li><h2>ES6: Modules</h2></li>
                <!--<li><h2>ES6: Symbols</h2></li>-->
                <li><h2>ES6: Promises</h2></li>
                <li><h2>&nbsp;</h2></li>
                </ul>

            </div>

            <div class="step" data-x="1200" data-y="-110" data-scale="0.4">
<p class='middle substep'>June 2015</p>
<p class='middle substep'>Browsers eagerly implemented stuff</p>

<div class='substep'>
<p class='middle'><img src='img/traceur.svg' width='50px'> Traceur</p>
<p class='middle'><img src='img/6to5.svg' width='50px' style='background-color:#F5DA55; padding: 10px;'> 6to5</p>
</div>
            </div>

            <div class="step" data-x="1105" data-y="105" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Generators</h1>
                <hr style='margin-bottom:75px;'/>

<p class='middle blue center' style='margin-bottom:50px'>Generate a sequence, one item at a time</p>

<div class='substep relative' style='height:275px;'>
<p class='large'>1 1 2 3 <span class='substep'>5</span> <span class='substep'>8</span></p>
<img src='img/gnome.png' class='absolute' style='width:150px; top:0px; right:200px;' />
<div class='absolute large' style='top:20px; right:50px;'>
<p class='absolute' style='transform: rotate(7deg);left:-20px'>F</p>
<p class='absolute' style='transform: rotate(17deg);left:-15px'>2</p>
<p class='absolute' style='transform: rotate(-7deg);left:-28px'>D</p>
<p class='absolute' style='transform: rotate(12deg);left:10px'>A</p>
<p class='absolute' style='transform: rotate(50deg);left:30px'>Z</p>
<p class='absolute' style='transform: rotate(100deg);left:15px'>U</p>
<p class='absolute' style='transform: rotate(-43deg);top:25px'>C</p>
<p class='absolute' style='transform: rotate(-80deg);top:-5px'>3</p>
<p class='absolute' style='transform: rotate(23deg);top:10px'>1</p>
<p class='absolute' style='transform: rotate(180deg);top:15px'>8</p>
<p class='absolute' style='transform: rotate(34deg);top:20px'>3</p>
<p class='absolute' style='transform: rotate(12deg);top:25px;'>9</p>
<p class='absolute' style='transform: rotate(100deg);top:30px'>1</p>
</div>
</div>


<p class='substep middle blue center'>More general: Function that can be paused in the middle</p>

            </div>

            <div class="step" data-x="1150" data-y="105" data-scale="0.05" data-rotate="-90">
                <h2>Syntax</h2>

<div class='substep'>
    <p class='middle center blue' style=''>Star: indicates a generator function</p>
</div>
<div style='position:relative'>
<pre><code class="javascript">function *foo() {
    // ...
    yield "bar1";
    // ...
    yield "bar2";
    // ...
}</code></pre>
<div class='substep'>
    <p class='middle center blue'>Yield: pauses the function</p>
</div>
</div>

            </div>
            <div class="step usage" data-x="1180" data-y="105" data-scale="0.05" data-rotate="-90">
            <h2>Usage</h2>

<pre><code class="javascript">function *foo() {
    console.log("running");
}

foo();</code></pre>

<p class='middle blue center substep'>Nothing happens!</p>


<pre class='substep'><code class="javascript">var generator = foo();</code></pre>

<pre><code class="javascript substep">// generator = { next: function() { ... }, throw: function() { ... }};</code></pre>

            </div>

            <div class="step usage" data-x="1220" data-y="105" data-scale="0.05" data-rotate="-90">
            <h2>Usage</h2>

<pre><code class="javascript">function *foo() {
    console.log("running");
    var x = yield 1;
    var y = yield 2;
    return 3;
}

var generator = foo();<span class='substep'>

var result1 = generator.next();</span><span class='substep'>
// console: "running"</span><span class='substep'>
// result1 = {value: 1, done: false}</span><span class='substep'>

var result2 = generator.next();</span><span class='substep'>
// result2 = {value: 2, done: false}</span><span class='substep'>

var result3 = generator.next();</span><span class='substep'>
// result3 = {value: 3, done: true}</span></code></pre>
            </div>

            <div class="step usage" data-x="1250" data-y="105" data-scale="0.05" data-rotate="-90">
            <h2>Usage</h2>

<pre><code class="javascript">function *foo() {
    var x = yield 1;
    var y = yield 2;
    return x + y;
}

var generator = foo();<span class='substep'>

var result1 = generator.next();</span><span class='substep'>
// result1 = {value: 1, done: false}</span><span class='substep'>

var result2 = generator.next(10);</span><span class='substep'>
// result2 = {value: 2, done: false}</span><span class='substep'>

var result3 = generator.next(20);</span><span class='substep'>
// result3 = {value: 30, done: true}</span></code></pre>
            </div>

            <div class="step example" data-x="1290" data-y="105" data-scale="0.05" data-rotate="-90">
                <h3>Example 1: Iteration</h3>
<pre><code class="javascript">function *range(start, end) {
    while (start != end) {
        yield start;
        start++;
    }
}</code></pre>
<div class='substep'>
<h4>Usage</h4>
<pre><code class="javascript">for (let i of range(0, 10)) {
    console.log(i);
}</code></pre>
</div>
<div class='substep'>
<h4>Result</h4>
<pre><code class="javascript">> 0
> 1
> 2
> 3
> 4
> 5
> 6
> 7
> 8
> 9
</code></pre>
</div>

            </div>
            <div class="step example" data-x="1340" data-y="105" data-scale="0.05" data-rotate="-90">
                <h3>Example 2: Fibonacci</h3>
<pre><code class="javascript">function *fibonacci() {
    var prev = 0, cur = 1;
    while (true) {
        let sum = cur + prev;
        yield sum;
        prev = cur
        cur = sum
    }
}</code></pre>

<div class='substep'>
<h4>Usage</h4>
<pre><code class="javascript">for (let n of fibonacci()) {
    if (n > 1000)
        break;
    console.log(n);
}</code></pre>
</div>

<div class='substep'>
<h4>Result</h4>
<pre><code class="javascript">> 0
> 1
> 1
> 2
> 3
> 5
> 8
...
</code></pre>
</div>
            </div>

            <div class="step example" data-x="1370" data-y="105" data-scale="0.05" data-rotate="-90">
                <h3>Generators: Compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 26
                <td><img src='img/chrome.png'> 39
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> 26
                <td><img src='img/safari.png'>n/a
                <tr class='notes'>
                <td>Released 14 months ago <!-- December 10, 2013 -->
                <td>Released 3 months ago <!-- 2014-11-18 -->
                <td>
                <td>Released 2 months ago <!-- December 3, 2014 -->
                </table>
            </div>

            <div class="step" data-x="1105" data-y="180" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Classes</h1>
                <hr />
                <br />&nbsp;<br />
                <br />&nbsp;<br />
                <img src="img/classes-in-js.png" />
                <br />&nbsp;<br />
                <img src="img/inheritance-in-js.png" />
                <br />&nbsp;<br />
                <img src="img/extend-in-js.png" />
            </div>

            <div class="step" data-x="1150" data-y="180" data-scale="0.05" data-rotate="-90">

<h2 class='blue bold center'>Prototype based !!</h2>
<pre><code class="javascript" style='font-size:1.0rem !important'>function Animal() {
    this.cuteness = 0; // neutral
    this.hunger = 100; // 0: has no hunger, 100: needs food
    this.approach = function() { } // do nothing
    // Getters
    Object.defineProperty(this, "fullness", {
        get: function() {
            return 100 - this.hunger;
        }
    });
}
Animal.prototype.feed = function(type) {
    this.hunger--;
}
Animal.talk = function(animal1, animal2) {
    // when animals are same species chitchat else growl
}
var unknownSpecies = new Animal();
</code></pre>
                <div class='balloon' style='width:400px; position:absolute; left:-100px;'>
                    <p style='padding-top:110px'>Why can't we use classes. I know classes.</p>
                    <img src="img/balloon.png" class='flip'/>
                </div>
                <div class='balloon' style='width:300px; position:relative; left:550px;'>
                    <p>What is this?</p>
                    <img src="img/balloon.png" class='rotate-180'/>
                </div>
            </div>

            <div class="step" data-x="1195" data-y="180" data-scale="0.05" data-rotate="-90">
<h2>Syntax</h2>
<pre><code class="javascript">class Animal() {
    constructor() {
        this.cuteness = 0; // neutral
        this.hunger = 100; // 0: has no hunger, 100: needs food
    }
    approach() {
        // do nothing
    }
    get fullness() {
        return 100 - this.hunger;
    }
    feed(type) {
        this.hunger--;
    }
    static talk(animal1, animal2) {
        // when animals are same species chitchat else growl
    }
}
</code></pre>
<p class='middle substep blue center'>A minimal class proposal</p>

            </div>

            <div class="step" data-x="1230" data-y="180" data-scale="0.05" data-rotate="-90">
<h2>Inheritance</h2>
<pre><code class="javascript">class Cat extends Animal {
    constructor() {
        super();
    }
    approach() {
        this.runAway()
    }
    feed(type) {
        if (isDelicious(type))
            super.feed(type)
        // Cats are picky even when hungry.
    }
}
</code></pre>

<p class='middle substep blue center'>No multiple inheritance!</p>

            </div>


            <!--<div class="step" data-x="1485" data-y="180" data-scale="0.05" data-rotate="-90">

<pre><code class="javascript">PLACEHOLDER
class SkinnedMesh extends THREE.Mesh {
  constructor(geometry, materials) {
    super(geometry, materials);

    this.idMatrix = SkinnedMesh.defaultMatrix();
    this.bones = [];
    this.boneMatrices = [];
    //...
  }
  update(camera) {
    //...
    super.update();
  }
  static defaultMatrix() {
    return new THREE.Matrix4();
  }
}

class C extends B {
  constructor() {
    super();
  }
  method() {
    super.method();
  }
  get x() {
    return super.x;
  }
}

/* ES5 code, without classes */
var Civilian = function Civilian(name) {
    this.name = name;
};
Civilian.prototype.danger = function () { console.log("Run away!"); };

var SuperHero = function(name, ability) {
    Civilian.call(this, name); // Call the super class constructor.
    this.ability = ability;
};
SuperHero.prototype = Object.create(Civilian.prototype);
SuperHero.prototype.constructor = SuperHero;
SuperHero.prototype.danger = function () { // Override the super class method.
    console.log("Never fear, " + this.name + " is here!");
    console.log(this.name + " uses " + this.ability + ". It's super effective.");
};

/* ES6 code, with classes */
class Civilian {
    constructor(name) {
        this.name = name;
    }
    danger() {
        console.log("Run away!");
    }
};

class SuperHero extends Civilian {
    constructor(name, ability) {
      super(name); // Call the super class constructor
        this.ability = ability;
    }
    danger() { // Override the super class method
        console.log("Never fear, " + this.name + " is here!");
        console.log(this.name + " uses " + this.ability + ". It's super effective.");
    }
};
</code></pre>
            </div>
-->

            <div class="step example" data-x="1270" data-y="180" data-scale="0.05" data-rotate="-90">
                <h3>Classes: Compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> n/a
                <td><img src='img/chrome.png'> n/a
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> n/a
                <td><img src='img/safari.png'>n/a
                <tr class='notes'>
                <td>
                <td>
                <td>Available in "Technical Preview" using "Experimental Web Platform Features"
                <td>
                </table>
<div class='substep' style='margin-top:150px'>
<table class='middle'>
<tr>
<td style='padding-right:25px'><img src='img/traceur.svg' width='50px' /> Traceur
<td><img src='img/6to5.svg' width='50px' style='background-color:#F5DA55; padding: 10px;' /> 6to5
</tr>
</table>
</div>
            </div>

            <div class="step" data-x="1105" data-y="255" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Arrow functions</h1>
                <hr />
            </div>

            <div class="step" data-x="1140" data-y="255" data-scale="0.05" data-rotate="-90">
                <h2>Problem: |this| is dynamic scoped</h2>
<pre><code class="javascript">function Archer() {
    this.arrows = 100;

    setInterval(function shoot() {
        this.arrows--;
    }, 5 * 1000);
}

var a1 = new Archer();</code></pre>
            </div>

            <div class="step" data-x="1185" data-y="255" data-scale="0.05" data-rotate="-90">
                <h2>Solution 1: lexical alias to |this|</h2>
<pre><code class="javascript">function Archer() {
    <em>var self = this;</em>
    this.arrows = 100;

    setInterval(function shoot() {
        <em>self</em>.arrows--;
    }, 5 * 1000);
}

var a1 = new Archer();</code></pre>
                <h2>Solution 2: bind the callback function</h2>
<pre><code class="javascript">function Archer() {
    this.arrows = 100;

    setInterval(function shoot() {
        this.arrows--;
    }.<em>bind(this)</em>, 5 * 1000);
}

var a1 = new Archer();</code></pre>
            </div>

            <div class="step" data-x="1220" data-y="255" data-scale="0.05" data-rotate="-90">
                <h2>New solution: arrow functions</h2>
<pre><code class="javascript">function Archer() {
    this.arrows = 100;

    setInterval(<em>() => {</em>
        this.arrows--;
    <em>}</em>, 5 * 1000);
}

var a1 = new Archer();</code></pre>
                <div>
                    <!--https://github.com/DavidBruant/ECMAScript-regrets#wrong-this-in-callbacks<br />-->
                    <!--based on C# and CoffeeScript<br />-->
                    <p class='middle center blue substep'>Shorter syntax</p>
                    <p class='middle center blue substep'>Lexically binds |this|</p>
                </div>
            </div>

            <div class="step" data-x="1250" data-y="255" data-scale="0.05" data-rotate="-90">
            <h2>Syntax: arrow functions</h2>
<pre><code class="javascript">([param] [, param]) => {
    statements
}

param => expression
</code></pre>
            </div>
            <div class="step" data-x="1280" data-y="255" data-scale="0.05" data-rotate="-90">
            <h2>Examples</h2>
<pre><code class="javascript substep">// 1. Basic
(x, y) => {
    return x+y
}</span>
<span class='substep'>
// 2. No return needed (for single expressions)
(x, y) => x+y</span>
<span class='substep'>
// 3. No parentheses (for one argument)
x => Math.pow(x, 2);</span>
<span class='substep'>
// 4. Or
x => {
    return Math.pow(x, 2);
}</span>
<span class='substep'>
// 5. No arguments
() => Math.random()</span>

<!--<span class='substep'>
// 6. Compare
function ListDecorator(items) {
    this.items = items;
}
ListDecorator.prototype.sortedKeys() {
    var keys = Object.keys(this.items);
    keys.sort( (key1, key2) => {
        return this.items[key1] - this.items[key2];
    } )
}

var ld = new ListDecorator([200, 123, 200]);
ld.sortedKeys();--></span> </code></pre>
            </div>

            <div class="step example" data-x="1315" data-y="255" data-scale="0.05" data-rotate="-90">
                <h3>Arrow functions: Compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 23
                <td><img src='img/chrome.png'> n/a
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> n/a
                <td><img src='img/safari.png'>n/a
                <tr class='notes'>
                <td>Released one and a half year ago<!-- August 6, 2013 -->
                <td>
                <td>Available in "Technical Preview" using "Experimental Web Platform Features"
                <td>
                </table>
            </div>

            <div class="step" data-x="1105" data-y="330" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Destructuring</h1>
                <hr style='margin-bottom: 150px' />

                <p class='middle center blue'>Assign data from Array or Object to variables</p>
                <!--<p>The destructuring assignment syntax is a JavaScript expression that makes it possible to extract data from arrays or objects using a syntax that mirrors the construction of array and object literals.</p>-->
            </div>
            <div class="step" data-x="1145" data-y="330" data-scale="0.05" data-rotate="-90">
                <h2>Destructuring: List matching.</h2>
<pre><code class="javascript"><span class='substep'>var [a, b] = [1, 2];
// a = 1, b = 2</span>
<span class='substep'>
var [a, ,b] = [1,2,3];
// a = 1, b = 3</span>
<span class='substep'>
var [a, b, ...c] = [1, 2, 3, 4, 5];
// a = 1, b = 2, c = [3, 4, 5]</span>
<span class='substep'>
var [b, a] = [a, b]
// swaps the content of a and b</span></code></pre>

            </div>
            <div class="step" data-x="1175" data-y="330" data-scale="0.05" data-rotate="-90">
                <h2>Destructuring: Object matching.</h2>
<pre><code class="javascript"><span class='substep'>var { data : var1 } = { data : 50 }
// var1 = 50</span>
<span class='substep'>
var { m: month, y: year } = { d: 1, m: 2, y: 2015}
// month = 2, year = 2015</span>
<span class='substep'>
var { child: { data: element  } } = { child : { child: null, data: 1}, data: null }
// element = 1;</span>
<span class='substep'>
var { data : data } = { data : 50 }
var { data } = { data : 50 }
// data = 50</span>
<span class='substep'>
var { rhs, lhs, data } = { rhs : {}, lhs: {}, data: 50 }
// rhs = {}, lhs = {}, data = 50</span></code></pre>

            </div>
            <div class="step" data-x="1200" data-y="330" data-scale="0.05" data-rotate="-90">
                <h2>Destructuring: Useable in parameter position.</h2>
<pre><code class="javascript">function g(<em>{name: x}</em>) {
  console.log(x);
}
g(<em>{name: 5, foo: 0}</em>)

<span class='substep'>// Console: 5</span></code></pre>

            </div>
            <div class="step" data-x="1225" data-y="330" data-scale="0.05" data-rotate="-90">
                <h2>Destructuring: Using defaults.</h2>
<pre><code class="javascript"><span class='substep'>// Fail-soft destructuring
var [a] = [];
a === undefined;</span>

<span class='substep'>// Fail-soft destructuring with defaults
var [a = 1] = [];
a === 1;</span></code></pre>
<p class='center blue middle substep'>Not implemented yet!</p>

            </div>
            <div class="step example" data-x="1250" data-y="330" data-scale="0.05" data-rotate="-90">
                <h3>Destructuring: Compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 34
                <td><img src='img/chrome.png'> n/a
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> n/a
                <td><img src='img/safari.png'>7.1
                <tr class='notes'>
                <td>Released 2 months ago<!-- December 1, 2014 -->
                <td>
                <td>
                <td>
                <td>Released 5 monts ago<!-- September 18, 2014 -->
                </table>
            </div>

            <div class="step" data-x="1105" data-y="400" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Modules</h1>


<p class='middle substep'>Fix dependencies of Libraries</h2>

<p class='middle substep'>Using the 'script'-tag is not scalable</p>

<p class='middle substep'>CommonJS Modules<br />
Asynchronous Module Definition (AMD)</h2>

                <!-- <div>
                One of the first challenges developers new to JavaScript who are building large applications will have to face is how to go about organizing their code. Most start by embedding hundreds of lines of code between a &lt;script> tag which works but quickly turns into a mess. The difficultly is that JavaScript doesn’t offer any obvious help with organizing our code. Literally where C# has using, Java has import - JavaScript has nothing. This has forced JavaScript authors to experiment with different conventions and to use the language we do have to create practical ways of organizing large JavaScript applications.
                </div>-->
</div>
            <div class="step" data-x="1155" data-y="400" data-scale="0.05" data-rotate="-90">
            <h2>Module pattern</h2>
                <hr />
<pre><code class="javascript">/* ------ lib.js ------ */
<span class='substep'>var privateProperty = 1;</span>
<span class='substep'>export var publicProperty = 2</span>

<span class='substep'>function privateFunction() { /* ... */ }</span>
<span class='substep'>export function publicFunction() { /* ... */ }</span>

<span class='substep'>export default function () { /*  */ }</span>

/* ------ main.js ------ */
<span class='substep'>import { publicProperty, publicFunction } from 'lib';
// publicProperty = 2, publicFunction = function () { /* ... */ }</span>

<span class='substep'>import { publicFunction as libfunc } from 'lib';
// libfunc = function() { /* ... */ }</span>

<span class='substep'>import { default as foo } from 'lib';
import foo from 'lib';
// foo now contains the default function</span>

<span class='substep'>import * as mylib from 'lib';
// mylib = { publicProperty: 2, publicFunction: function() { /* ... */}}</span>
</code></pre>
            </div>

            <div class="step example" data-x="1195" data-y="400" data-scale="0.05" data-rotate="-90">
                <h2 style='margin-bottom:100px;'>Module loader</h2>

<div class='substep'>
<pre><code class="javascript" style='margin-bottom:50px'>System.import('some_module')
// Returns a promise? that loads the module async</code></pre>
                <p class='center middle blue' style='margin-bottom:100px'>To be determined</p>
</div>

                <p class='middle substep'>Make it possible to load libraries sync and async</p>


            </div>

    <!--    <div class="step example" data-x="1435" data-y="400" data-scale="0.05" data-rotate="-90">
                <h3>Modules: Compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> n/a
                <td><img src='img/chrome.png'> n/a
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> n/a
                <td><img src='img/safari.png'> n/a
                <tr class='notes'>
                <td>
                <td>
                <td>
                <td>
                <td>
                </table>
            </div>

            <div class="step" data-x="1312" data-y="480" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Symbols</h1>
                <hr />
                <p class='blue large'>A new primitive type!</p>
                <p style='font-size:50px; margin-top:250px'>
                    <img src='img/thinking-caveman.png' width='140px'/>
                    Undefined, Null, Boolean, String and Number
                </p>
            </div>

            <div class="step" data-x="1360" data-y="480" data-scale="0.05" data-rotate="-90">
                <h2>Symbols: What?</h2>
                <p>Unique IDs</p>

                <h2>Symbols: Syntax</h2>
<pre><code class="javascript">Symbol([description])</code></pre>
            </div>

            <div class="step" data-x="1400" data-y="480" data-scale="0.05" data-rotate="-90">
                <h2>Unique accessers</h2>
<pre><code class="javascript">document.getElementById("test")["visited"] = true;
// Clashes if another library by accident also uses "visited".

var visited_symbol = Symbol("cached");
document.getElementById("test")[visited_symbol] = true;
// Will never clash.</code></pre>
            </div>

            <div class="step example" data-x="1425" data-y="480" data-scale="0.05" data-rotate="-90">
                <h3>Symbols: Compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 36
                <td><img src='img/chrome.png'> 38
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> 25
                <td><img src='img/safari.png'> n/a
                <tr class='notes'>
                <td>Releases this month
                <td>Released 4 months ago
                <td>Available in "Technical Preview" using "Experimental Web Platform Features"
                <td>Released 4 months ago
                <td>
                </table>
            </div>
-->
            <div class="step" data-x="1105" data-y="480" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Promises</h1>
                <hr style='margin-bottom:200px;' />
                <p class='center blue middle'>Abstraction for Async code</p>
            </div>

            <div class="step" data-x="1145" data-y="480" data-scale="0.05" data-rotate="-90">
                <h2>Problem</h2>
                <p class='lessmiddle'>JS executes sequentially and blocks all other execution</p>

<p class='middle blue center substep'>Easiest to reason about</p>

<pre class='substep' style='margin-bottom:50px;'><code class="javascript">while (true) {
    // Crunch some data.
}</code></pre>


            <div class='center substep' style='margin-bottom:50px'>
            <img src='img/slowscript.gif' />
            </div>

<pre class='substep'><code class="javascript">// Make sure first image is loaded
var img = document.getElementsByTagName("img")[0]
while (!img.complete) {
    // not yet completed
}
// Completed, now we can do something with it.</code></pre>

            </div>

            <div class="step" data-x="1195" data-y="480" data-scale="0.05" data-rotate="-90">
                <p class='lessmiddle'>So we need async behaviour.</p>

<p class='middle blue center substep'>Enter events and continuation functions</p>

<pre class='substep'><code class="javascript">// Make sure first image is loaded
var img = document.getElementsByTagName("img")[0]
img.onload = function() {
    // Completed, now we can do something with it.
}</code></pre>
<div class='substep'>
<p class='middle blue center'>What if img was already loaded?</p>
<p class='center'>Just add some more code. DUH!</p>
</div>
<pre class='substep'><code class="javascript">if (img.completed) {
    img.onload();// Make sure first image is loaded
}</code></pre>

<!--Notice the small annoyincies. More code. Need to look up onload and find completed.-->
            </div>

            <div class="step" data-x="1240" data-y="480" data-scale="0.05" data-rotate="-90">
                <h2>Promises</h2>
                <p>the idea is to make this simpler with promises and have some nice tools around it.</p>

                <h2>Syntax</h2>
<pre><code class="javascript">
function executor(resolve, reject) {
    /* do something */

    if (/* fail */)
        reject(); // Bonus, will also get called upon Error.

    /* done */
    resolve();
}

var promise = new Promise(executor);

promise.then(function() {
    /* Let's do something with the result. */
}, function() {
    /* Failed. */
})
</code></pre>

           </div>
           <div class="step" data-x="1280" data-y="480" data-scale="0.05" data-rotate="-90">

            <h2>Image loaded example</h2>

<pre><code class="javascript">var img = document.getElementsByTagName("img")[0]
ready = img.getReadyPromise() // imagine this exists.
ready.then(function() {
    // Completed, now we can do something with it.
})</code></pre>

            </div>


            <div class="step" data-x="1310" data-y="480" data-scale="0.05" data-rotate="-90">
            <h2>Promise Example: Chaining</h2>

<pre><code class="javascript">var imgs = document.getElementsByTagName("img")
ready = imgs[0].getReadyPromise() // imagine this exists.
ready.then(function() {
    <em>return imgs[1].getReadyPromise(); // return promise.</em>
}).then(function() {
    // both images are loaded.
});</code></pre>

            </div>

            <div class="step" data-x="1350" data-y="480" data-scale="0.05" data-rotate="-90">
            <h2>Example: Parallel testing of multiple promises</h2>

<pre><code class="javascript">var imgs = document.getElementsByTagName("img")
var promises = [ imgs[0].getReadyPromise(), imgs[1].getReadyPromise() ]
Promise.all(promises).then(function() {
    // Both images are loaded.
})</code></pre>

            </div>
            <div class="step example" data-x="1390" data-y="480" data-scale="0.05" data-rotate="-90">
                <h3>Promises: Compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 29
                <td><img src='img/chrome.png'> 32
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> 19
                <td><img src='img/safari.png'> 7.1
                <tr class='notes'>
                <td>Released 9 months ago<!-- April 29, 2014 -->
                <td>Released 1 year ago<!-- 2014-01-15 -->
                <td>Available in "Technical Preview" using "Experimental Web Platform Features"
                <td>Released 1 year ago<!-- January 28, 2014-->
                <td>Released 5 monts ago<!-- September 18, 2014 -->
                </table>
            </div>


            <div class="es6-list step" data-x="1900" data-y="280" data-scale="0.7">
                <h1>The Future</h1>
                <ul>
                    <li><h2>Typed Objects</h2></li>
                    <li><h2>SIMD.js</h2></li>
                </ul>
            </div>

            <div class="step" data-x="1740" data-y="210" data-scale="0.3">
            <div style='margin-left:250px'>
                <p>Might be present in ES7, or even later.</p>
                <p>Very experimental features (implemented in Nightly).</p>
                <p>Instable APIs.</p>
                <p class="substep">Use at your own risks!</p>
            </div>
            </div>

            <div class="step" data-x="1700" data-y="300" data-scale="0.05" data-rotate="-90">
                <h1>Typed Objects</h1>
                <hr />
                <p>Add a way to describe data structures which members have
                defined types.</p>
                <p class="substep">Types among {u,}int{8,16,32,64} / float{32,64} / String /
                Object, etc..</p>
            </div>

            <div class="step" data-x="1720" data-y="300" data-scale="0.05" data-rotate="-90">
            <h2>Create your own structs!</h2>
            <pre><code class="javascript">
            var {StructType, ArrayType} = TypedObject;
            // Create a simple type
            var Pixel = new StructType({'r': uint8, 'g': uint8, 'b': uint8});
            </code></pre>

            <pre class="substep"><code class="javascript">
            // Create an array type
            var Square = new ArrayType(Pixel, 4);
            </code></pre>

            <pre class="substep"><code class="javascript">
            // Compose types!
            var Image = new StructType({'id': uint16, 'src': Square});
            </code></pre>
            </div>

            <div class="step" data-x="1755" data-y="300" data-scale="0.05" data-rotate="-90">
            <h2>Create your own typed objects!</h2>
            <pre><code class="javascript">
            var p = new Pixel({r: 128, g: 42, b: 25});
            p.g; // shows 42
            </code></pre>

            <pre class="substep"><code class="javascript">
            // Omit a field in the constructor to give it a default value
            var p2 = new Pixel({r: 128, b: 56});
            p2.g; // shows 0
            </code></pre>

            <pre class="substep"><code class="javascript">
            // Arguments are coerced to fit the specified type
            var p3 = new Pixel({r: 128, g: 35, b: 1337});
            p2.b; // shows 57
            </code></pre>

            <pre class="substep"><code class="javascript">
            // Let's instantiate an ArrayType
            var sq = new Square([
                {r: 24, g: 35, b: 46},
                {r: 52, g: 63, b: 74},
                p,
                p2
            ]);
            </code></pre></div>

            <div class="step" data-x="1790" data-y="300" data-scale="0.05" data-rotate="-90">
            <h2>Features of typed objects</h2>
            <pre><code class="javascript">
            // You can't add attributes to Typed objects instances
            var p = new Pixel();
            p.id = "let's sneak in a string, i'm sure the VM won't see it";
            // TypeError: Pixel is not extensible
            </code></pre>

            <pre class="substep"><code class="javascript">
            // Typed objects are objects (!)
            typeof p2; // "object"

            var p2 = new Pixel();
            p == p2; // false
            p === p2; // false
            </code></pre></div>

            <div class="step" data-x="1815" data-y="300" data-scale="0.05" data-rotate="-90">
            <h2>5 Reasons To Love Typed Objects; #5 Is My Favourite</h2>
            <ul>
                <li class="substep">No boxing processing overhead.</li>
                <li class="substep">Better memory layout.</li>
                <li class="substep">No deoptimizations due to shapes changing.</li>
                <li class="substep">Predictable performance.</li>
                <li class="substep">... and it can inspire optimizations in
                your VM today!</li>
            </ul>
            </div>

            <div class="step" data-x="1850" data-y="300" data-scale="0.05" data-rotate="-90">
            <h2>Can we remove boxing of plain JS objects?</h2>
            <p>
            If we can prove an object has a stable shape ("hidden class")
            and we know its definite properties, we can handle it as a Typed
            Object.
            </p>

            <pre class="substep"><code class="javascript">
            function PixelFactory(r, g, b) {
                this.r = r | 0; // Forces int32 coercion
                this.g = g | 0;
                this.b = b | 0;
            }
            </code></pre>

            <pre class="substep"><code class="javascript">
            var Pixel = new StructType({r: int32, g: int32, b: int32});
            // What if we handle an object created from the PixelFactory as a
            // Typed Object with the Pixel type?
            </code></pre>

            <p><h3 class="substep"><a
                    href="https://bugzilla.mozilla.org/show_bug.cgi?id=1106828">Firefox: Bug 1106828</a></h3></p>

            </div>

            <div class="step" data-x="1700" data-y="370" data-scale="0.05" data-rotate="-90">
                <h1>SIMD.js</h1>
                <hr />
                <p>Use vector operations directly in JavaScript and have
                these jitted as vector processor instructions.</p>
            </div>

            <div class="step" data-x="1725" data-y="370" data-scale="0.05" data-rotate="-90">
                <h2>Single Instruction, Multiple Data</h2>
                <p><img src="img/simd.jpg" /></p>
                <p>A normal operation takes two input operands.</p>
                <p>A SIMD operation operates on pairs of input operands.</p>
                <p>Implementations of SIMD: SSE (x86), NEON (arm)</p>
                <p>This is fast! Mostly used in heavily parallel processing (audio / image processing,
                codecs, games...).</p>
            </div>

            <div class="step" data-x="1750" data-y="370" data-scale="0.05" data-rotate="-90">
                <h2>The SIMD.js model</h2>
                <p>Fixed-length: 128 bits (much useful, well supported, very SIMD, wow).</p>
                <p>Uniform behaviours of operation accross platforms.</p>
                <p>New value types: int8x16, int16x8, int32x4, float32x4,
                float64x2.</p>
                <p>These can be embedded in Typed Objects descriptors.</p>
            </div>

            <div class="step" data-x="1775" data-y="370" data-scale="0.05" data-rotate="-90">
                <h2>Available operations</h2>
                <ul>
                    <li>- Basic arithmetic (add, sub, mul, div, abs, sqrt, min/max, etc.).</li>
                    <li>- Comparisons (lessThan{,OrEqual}, greaterThan{,OrEqual}, equal, notEqual</li>
                    <li>- Conversions and bitcasts (e.g., float32x4.fromInt32x4,
                    float32x4.fromInt32x4Bits, etc.)</li>
                    <li>- Bitwise operations (or, and, xor, not,
                    shiftLeftByScalar, shiftRightLogicalByScalar,
                    shiftRightLogicalByScalar, etc.)</li>
                    <li>- Manipulate data (lane accessors and setters,
                    select, bitselect, shuffles, partial or full loads and stores within typed
                    arrays)</li>
                </ul>
            </div>

            <div class="step" data-x="1810" data-y="370" data-scale="0.05" data-rotate="-90">
                <h2>can haz code? okthxbye</h2>
                <pre><code class="javascript">
                function fibonacci4(n) {
                    var x = SIMD.int32x4(1, 1, 2, 3);
                    var y = SIMD.int32x4(1, 2, 3, 5);

                    while (n--) {
                        var tmp = y;
                        y = SIMD.int32x4.add(x, y);
                        x = tmp;
                    }

                    return x;
                }

                var v = fibonacci4(10);
                console.log(v.x, v.y, v.z, v.w); // (89, 144, 233, 377)
                </code></pre>
            </div>

            <div class="step" data-x="1850" data-y="370" data-scale="0.05" data-rotate="-90">
                <h2>Another example</h2>
                <pre><code class="javascript">
                var x = SIMD.float32x4(1, 2, 3, 4);
                var y = SIMD.float32x4(1, 2, 3, 4);

                var previous = SIMD.float32x4.splat(0); // copies the value in all four lanes

                var threshold = SIMD.float32x4.splat(.001337);

                while (true) {
                    previous = x;

                    x = SIMD.float32x4.add(x, y);
                    x = SIMD.float32x4.sqrt(x); // square root

                    let v = SIMD.float32x4.sub(x, previous); // subtract
                    v = SIMD.float32x4.abs(v); // absolute

                    let cmp = SIMD.float32x4.lessThanOrEqual(v, threshold); // <=
                    if (cmp.signMask == 0b1111) // true in all lanes
                        break;
                };

                console.log(x.x, x.y, x.z, x.w);
                </code></pre>
            </div>

            <div class="step" data-x="1890" data-y="370" data-scale="0.05" data-rotate="-90">
                <h1>Thank you!</h1>
            </div>

            <div id="overview" class="step" data-x="1100" data-y="125" data-scale="1.4">
            </div>

        </div>

        <script src="highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <script type="text/javascript" src="impress.js"></script>
        <!--
            call `impress().init()` function to initialize impress.js presentation.
        -->
        <script>impress().init();</script>
    </body>
</html>
